{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay.api.js","../src/js/variables.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// ============================================= INCLUDING IZITOAST\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// ============================================= MAKING REQUEST \nexport function findImages(image) {\n\n\n// ============================================ SEARCH PARAMS\n  const imageSearchParams = new URLSearchParams({\n    key: '42878081-96b370588af70c81d3a302fb0',\n    q: image,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    order: 'latest',\n    safesearch: true,\n  });\n\n  return fetch(`https://pixabay.com/api/?${imageSearchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('response.code');\n        return;\n      } else {\n        return response.json();\n      }\n    })\n}\n","// ======================================== GALLERY VARIABLES\nexport const gallery = document.querySelector('.images-gallery');","// ======================================= INLCUDING SIMPLE LIGHTBOX\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// ======================================== VAFRIABLES IMPORT\nimport { gallery } from './variables.js';\n\n// ======================================== RENDERING IMAGES\nexport function renderImages(response) {\n  try {\n    let myLightboxGallery;\n    const images = response.hits;\n    // creating markup\n    const galleryMarkup = images\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          downloads,\n          comments,\n        }) =>\n          `\n        <li class=\"gallery-item\">\n          <a class=\"image-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n          </a>\n  \n          <div class=\"tags-container\">\n            <div class=\"tag\">\n              <p class=\"tag-name\">likes</p>\n              <span class=\"tag-details\">${likes}</span>\n            </div>\n            <div class=\"tag\">\n              <p class=\"tag-name\">views</p>\n              <span class=\"tag-details\">${views}</span>\n            </div>\n            <div class=\"tag\">\n              <p class=\"tag-name\">downloads</p>\n              <span class=\"tag-details\">${downloads}</span>\n            </div>\n            <div class=\"tag\">\n              <p class=\"tag-name\">comments</p>\n              <span class=\"tag-details\">${comments}</span>\n            </div>\n          </div>\n        </li>\n        `\n      )\n      .join('');\n\n    gallery.innerHTML = galleryMarkup;\n\n    // ================================== ADDING SIMPLE LIGHTBOX\n    if (!myLightboxGallery) {\n      myLightboxGallery = new SimpleLightbox('.gallery a');\n    } else {\n      myLightboxGallery.refresh();\n    }\n  } catch {\n    console.error('Error rendering images:', error);\n    // Display toast message to inform the user\n    iziToast.error({\n      message: 'Failed to render images. Please try again later.',\n      position: 'topRight',\n    });\n  }\n}\n","// ======================================= INCLUDING IZITOAST\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// ======================================= FUNCTIONS IMPORTS\nimport { findImages } from './js/pixabay.api';\nimport { renderImages } from './js/render-functions';\n\n// ======================================= VARIABLES IMPORTS\n\nimport { gallery } from './js/variables';\n\n// ======================================= FORM \nconst imageSearchForm = document.querySelector('.image-search-form');\nimageSearchForm.addEventListener('submit', handleImageSearchFormSubmit);\n\n// ======================================== HANDLE FORM SUBMIT\n\nfunction handleImageSearchFormSubmit(event) {\n  event.preventDefault();\n\n// ======================================== ADDING LOADER\n\n  const loaderMarkup = `<span class=\"loader\"></span>`;\n  gallery.innerHTML = loaderMarkup;\n\n  const imageToSearchFor =\n    event.currentTarget.elements.searchImage.value.trim();\n\n  if (imageToSearchFor === '') {\n    iziToast.warning({\n      message: 'Write what image you want to search for',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  event.currentTarget.reset();\n\n  // ================================== MAKING REQUEST\n  findImages(imageToSearchFor)\n    .then(response => {\n      if (!response.hits.length) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#fafafb',\n          messageSize: '16px',\n          maxWidth: '432px',\n          backgroundColor: 'rgb(239, 64, 64)',\n          position: 'topRight',\n          progressBarColor: 'rgb(181, 27, 27)',\n          // icon: 'icon-error-sign',\n        });\n      } else {\n      // ============================== RENDERING IMAGES\n        renderImages(response);\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        message: 'Failed to fetch images. Please try again later.',\n        position: 'topRight',\n      });\n    });\n}\n"],"names":["findImages","image","imageSearchParams","response","gallery","renderImages","myLightboxGallery","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","downloads","comments","SimpleLightbox","imageSearchForm","handleImageSearchFormSubmit","event","loaderMarkup","imageToSearchFor","iziToast","error"],"mappings":"6vBAKO,SAASA,EAAWC,EAAO,CAIhC,MAAMC,EAAoB,IAAI,gBAAgB,CAC5C,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,MAAO,SACP,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,4BAA4BC,CAAiB,EAAE,EACzD,KAAKC,GAAY,CAChB,GAAKA,EAAS,GAIZ,OAAOA,EAAS,OAHhB,MAAM,IAAI,MAAM,eAAe,CAKvC,CAAK,CACL,CC1BO,MAAMC,EAAU,SAAS,cAAc,iBAAiB,ECOxD,SAASC,EAAaF,EAAU,CACrC,GAAI,CACF,IAAIG,EAGJ,MAAMC,EAFSJ,EAAS,KAGrB,IACC,CAAC,CACC,aAAAK,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,UAAAC,EACA,SAAAC,CACD,IACC;AAAA;AAAA,wCAE8BL,CAAa;AAAA,8CACPD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAM9BC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAS;AAAA;AAAA;AAAA;AAAA,0CAITC,CAAQ;AAAA;AAAA;AAAA;AAAA,SAK3C,EACA,KAAK,EAAE,EAEVV,EAAQ,UAAYG,EAGfD,EAGHA,EAAkB,QAAO,EAFzBA,EAAoB,IAAIS,EAAe,YAAY,CAIzD,MAAU,CACN,QAAQ,MAAM,0BAA2B,KAAK,EAE9C,SAAS,MAAM,CACb,QAAS,mDACT,SAAU,UAChB,CAAK,CACF,CACH,CCxDA,MAAMC,EAAkB,SAAS,cAAc,oBAAoB,EACnEA,EAAgB,iBAAiB,SAAUC,CAA2B,EAItE,SAASA,EAA4BC,EAAO,CAC1CA,EAAM,eAAc,EAIpB,MAAMC,EAAe,+BACrBf,EAAQ,UAAYe,EAEpB,MAAMC,EACJF,EAAM,cAAc,SAAS,YAAY,MAAM,KAAI,EAErD,GAAIE,IAAqB,GAAI,CAC3BC,EAAS,QAAQ,CACf,QAAS,0CACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDH,EAAM,cAAc,QAGpBlB,EAAWoB,CAAgB,EACxB,KAAKjB,GAAY,CACXA,EAAS,KAAK,OAcjBE,EAAaF,CAAQ,EAbrBkB,EAAS,MAAM,CACb,QACE,2EACF,aAAc,UACd,YAAa,OACb,SAAU,QACV,gBAAiB,mBACjB,SAAU,WACV,iBAAkB,kBAE5B,CAAS,CAKT,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CD,EAAS,MAAM,CACb,QAAS,kDACT,SAAU,UAClB,CAAO,CACP,CAAK,CACL"}
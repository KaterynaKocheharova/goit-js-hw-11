{"version":3,"file":"commonHelpers.js","sources":["../src/js/variables.js","../src/js/render-functions.js","../src/js/pixabay.api.js","../src/main.js"],"sourcesContent":["// ======================================== GALLERY VARIABLES\nexport const gallery = document.querySelector('.images-gallery');","// ======================================= INLCUDING SIMPLE LIGHTBOX\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { gallery } from './variables.js';\n\n// ======================================== RENDERING IMAGES\nexport function renderImages(response) {\n  try {\n    let myLightboxGallery;\n    const images = response.hits;\n    // creating markup\n    const galleryMarkup = images\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          downloads,\n          comments,\n        }) =>\n          `\n        <li class=\"gallery-item\">\n          <a class=\"image-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n          </a>\n  \n          <div class=\"tags-container\">\n            <div class=\"tag\">\n              <p class=\"tag-name\">likes</p>\n              <span class=\"tag-details\">${likes}</span>\n            </div>\n            <div class=\"tag\">\n              <p class=\"tag-name\">views</p>\n              <span class=\"tag-details\">${views}</span>\n            </div>\n            <div class=\"tag\">\n              <p class=\"tag-name\">downloads</p>\n              <span class=\"tag-details\">${downloads}</span>\n            </div>\n            <div class=\"tag\">\n              <p class=\"tag-name\">comments</p>\n              <span class=\"tag-details\">${comments}</span>\n            </div>\n          </div>\n        </li>\n        `\n      )\n      .join('');\n\n    // adding markup\n    gallery.innerHTML = galleryMarkup;\n\n    // simple lightbox creating or refreshing\n    if (!myLightboxGallery) {\n      myLightboxGallery = new SimpleLightbox('.gallery a');\n    } else {\n      // If SimpleLightbox is already initialized, call refresh method\n      myLightboxGallery.refresh();\n    }\n  } catch {\n    console.error('Error rendering images:', error);\n    // Display toast message to inform the user\n    iziToast.error({\n      message: 'Failed to render images. Please try again later.',\n      position: 'topRight',\n    });\n  }\n}\n","// ============================================= INCLUDING IZITOAST\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderImages } from './render-functions';\n\n// ===================================== MAKING SERVER REQUEST TO FIND IMAGES\nexport function findImages(image) {\n\n  const imageSearchParams = new URLSearchParams({\n    key: '42878081-96b370588af70c81d3a302fb0',\n    q: image,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    order: 'latest',\n    safesearch: true,\n  });\n\n  // making request to pixabay\n  fetch(`https://pixabay.com/api/?${imageSearchParams}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('response.code');\n        return;\n      } else {\n        return response.json();\n      }\n    })\n    // no images handling\n    .then(response => {\n      console.log(response);\n      if (!response.hits.length) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#fafafb',\n          messageSize: '16px',\n          maxWidth: '432px',\n          backgroundColor: 'rgb(239, 64, 64)',\n          position: 'topRight',\n          progressBarColor: 'rgb(181, 27, 27)',\n          // icon: 'icon-error-sign',\n        });\n      } else {\n        // calling rendering images function\n        renderImages(response);\n      }\n    }) // handling an error\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        message: 'Failed to fetch images. Please try again later.',\n        position: 'topRight'\n      });\n    });\n}\n","// ======================================= INCLUDING IZITOAST\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { findImages } from './js/pixabay.api';\nimport { gallery } from './js/variables.js';\n\nconst imageSearchForm = document.querySelector('.image-search-form');\nimageSearchForm.addEventListener('submit', handleImageSearchFormSubmit);\n\n// ======================================= HANDLE FORM SUBMIT\n\nfunction handleImageSearchFormSubmit(event) {\n  event.preventDefault();\n  if (event.currentTarget.elements.searchImage.value.trim() === '') {\n    iziToast.warning({\n      message: 'Write what image you want to search for',\n      position: 'topRight'\n    });\n    return;\n  }\n  const imageToSearchFor = event.currentTarget.elements.searchImage.value;\n  event.currentTarget.reset();\n\n  // calling findimages function; making a request\n  findImages(imageToSearchFor);\n\n    // Adding loader\n  const loaderMarkup = `<span class=\"loader\"></span>`;\n  gallery.innerHTML = loaderMarkup;\n}\n"],"names":["gallery","renderImages","response","myLightboxGallery","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","downloads","comments","SimpleLightbox","findImages","image","imageSearchParams","iziToast","error","imageSearchForm","handleImageSearchFormSubmit","event","imageToSearchFor","loaderMarkup"],"mappings":"6vBACO,MAAMA,EAAU,SAAS,cAAc,iBAAiB,ECKxD,SAASC,EAAaC,EAAU,CACrC,GAAI,CACF,IAAIC,EAGJ,MAAMC,EAFSF,EAAS,KAGrB,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,UAAAC,EACA,SAAAC,CACD,IACC;AAAA;AAAA,wCAE8BL,CAAa;AAAA,8CACPD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAM9BC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAS;AAAA;AAAA;AAAA;AAAA,0CAITC,CAAQ;AAAA;AAAA;AAAA;AAAA,SAK3C,EACA,KAAK,EAAE,EAGVX,EAAQ,UAAYI,EAGfD,EAIHA,EAAkB,QAAO,EAHzBA,EAAoB,IAAIS,EAAe,YAAY,CAKzD,MAAU,CACN,QAAQ,MAAM,0BAA2B,KAAK,EAE9C,SAAS,MAAM,CACb,QAAS,mDACT,SAAU,UAChB,CAAK,CACF,CACH,CC9DO,SAASC,EAAWC,EAAO,CAEhC,MAAMC,EAAoB,IAAI,gBAAgB,CAC5C,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,MAAO,SACP,WAAY,EAChB,CAAG,EAGD,MAAM,4BAA4BC,CAAiB,EAAE,EAClD,KAAKb,GAAY,CAChB,GAAKA,EAAS,GAIZ,OAAOA,EAAS,OAHhB,MAAM,IAAI,MAAM,eAAe,CAKvC,CAAK,EAEA,KAAKA,GAAY,CAChB,QAAQ,IAAIA,CAAQ,EACfA,EAAS,KAAK,OAcjBD,EAAaC,CAAQ,EAbrBc,EAAS,MAAM,CACb,QACE,2EACF,aAAc,UACd,YAAa,OACb,SAAU,QACV,gBAAiB,mBACjB,SAAU,WACV,iBAAkB,kBAE5B,CAAS,CAKT,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CD,EAAS,MAAM,CACb,QAAS,kDACT,SAAU,UAClB,CAAO,CACP,CAAK,CACL,CC/CA,MAAME,EAAkB,SAAS,cAAc,oBAAoB,EACnEA,EAAgB,iBAAiB,SAAUC,CAA2B,EAItE,SAASA,EAA4BC,EAAO,CAE1C,GADAA,EAAM,eAAc,EAChBA,EAAM,cAAc,SAAS,YAAY,MAAM,KAAM,IAAK,GAAI,CAChEJ,EAAS,QAAQ,CACf,QAAS,0CACT,SAAU,UAChB,CAAK,EACD,MACD,CACD,MAAMK,EAAmBD,EAAM,cAAc,SAAS,YAAY,MAClEA,EAAM,cAAc,QAGpBP,EAAWQ,CAAgB,EAG3B,MAAMC,EAAe,+BACrBtB,EAAQ,UAAYsB,CACtB"}